<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardboard Beats & Dreams</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://rohansweb-codexamples.github.io/Display/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f1ea;
            transition: background-color 0.3s ease;
        }

        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .playing-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }

        .logo-img {
            max-width: 120px;
            height: auto;
        }

        /* Fullscreen Button Styling */
        #fullscreenBtn {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
        }

        /* Lock Modal Styling */
        #lockModal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        /* Message Box Styling */
        #msgBox {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: #2d2d2d;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 100;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4">

    <!-- Fullscreen Toggle Button -->
    <button id="fullscreenBtn" class="p-3 rounded-full card-shadow hover:bg-white transition-all active:scale-90 group" title="Toggle Fullscreen">
        <svg id="fsIconEnter" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-600 group-hover:text-orange-600"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
        <svg id="fsIconExit" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-600 group-hover:text-orange-600 hidden"><path d="M4 14h6v6M20 10h-6V4M14 10l7-7M10 14l-7 7"/></svg>
    </button>

    <!-- Passcode Modal -->
    <div id="lockModal">
        <div class="bg-white p-8 rounded-3xl shadow-2xl max-w-xs w-full text-center">
            <h2 class="text-xl font-bold mb-4 text-stone-800">Exit Restricted</h2>
            <p class="text-sm text-stone-500 mb-6">Enter passcode to exit fullscreen</p>
            <input type="password" id="passcodeInput" placeholder="••••••" class="w-full text-center text-2xl tracking-widest border-2 border-stone-200 rounded-xl p-3 mb-4 focus:border-orange-500 outline-none">
            <div class="flex gap-2">
                <button id="cancelExit" class="flex-1 py-3 text-stone-500 font-medium">Cancel</button>
                <button id="confirmExit" class="flex-1 py-3 bg-orange-600 text-white rounded-xl font-bold">Unlock</button>
            </div>
        </div>
    </div>

    <!-- Message Box for UI feedback -->
    <div id="msgBox">Fullscreen unavailable in this environment</div>

    <!-- Header Section with Logo -->
    <header class="text-center mb-12 flex flex-col items-center">
        <img src="https://rohansweb-codexamples.github.io/Display/logo.png" alt="Logo" class="logo-img mb-4">
        <h1 class="text-4xl font-bold text-stone-800 mb-2">Cardboard Melodies</h1>
        <p class="text-stone-600">A collection of cozy tunes and moments</p>
    </header>

    <!-- Main Play Button -->
    <div class="mb-16 text-center">
        <button id="playBtn" class="bg-orange-600 hover:bg-orange-700 text-white text-2xl font-bold py-6 px-12 rounded-full shadow-lg transform transition active:scale-95 flex items-center gap-3 mx-auto">
            <span id="btnIcon">▶</span>
            <span>PLAY</span>
        </button>
        <p id="status" class="mt-4 text-sm font-medium text-stone-500 h-6 uppercase tracking-widest"></p>
    </div>

    <!-- Image Gallery -->
    <main class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl w-full">
        <div class="group overflow-hidden rounded-2xl card-shadow bg-white p-2 transition hover:-translate-y-1">
            <div class="w-full h-64 overflow-hidden rounded-xl">
                <img src="https://rohansweb-codexamples.github.io/Display/Gemini_Generated_Image_xol8wjxol8wjxol8.png" 
                     alt="Cardboard Town" 
                     class="w-full h-full object-cover object-top">
            </div>
            <p class="p-4 text-center font-semibold text-stone-700">The Town</p>
        </div>

        <div class="group overflow-hidden rounded-2xl card-shadow bg-white p-2 transition hover:-translate-y-1">
            <div class="w-full h-64 overflow-hidden rounded-xl">
                <img src="https://rohansweb-codexamples.github.io/Display/Gemini_Generated_Image_xol8wjxol8wjxol8.png" 
                     alt="Cardboard Corners" 
                     class="w-full h-full object-cover object-center">
            </div>
            <p class="p-4 text-center font-semibold text-stone-700">The Corners</p>
        </div>

        <div class="group overflow-hidden rounded-2xl card-shadow bg-white p-2 transition hover:-translate-y-1">
            <div class="w-full h-64 overflow-hidden rounded-xl">
                <img src="https://rohansweb-codexamples.github.io/Display/Gemini_Generated_Image_xol8wjxol8wjxol8.png" 
                     alt="Blue Rivers" 
                     class="w-full h-full object-cover object-bottom">
            </div>
            <p class="p-4 text-center font-semibold text-stone-700">The Rivers</p>
        </div>
    </main>

    <!-- Scripting -->
    <script>
        const songs = [
            "https://rohansweb-codexamples.github.io/Display/Cardboard_Town_Dreams.mp3",
            "https://rohansweb-codexamples.github.io/Display/Cardboard_Corners.mp3",
            "https://rohansweb-codexamples.github.io/Display/Cardboard_Castles_Blue_Rivers.mp3"
        ];

        const audio = new Audio();
        const playBtn = document.getElementById('playBtn');
        const btnIcon = document.getElementById('btnIcon');
        const status = document.getElementById('status');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const fsIconEnter = document.getElementById('fsIconEnter');
        const fsIconExit = document.getElementById('fsIconExit');
        const msgBox = document.getElementById('msgBox');
        
        // Lock UI Elements
        const lockModal = document.getElementById('lockModal');
        const passcodeInput = document.getElementById('passcodeInput');
        const confirmExit = document.getElementById('confirmExit');
        const cancelExit = document.getElementById('cancelExit');

        let isPlaying = false;
        const EXIT_CODE = "780018";

        function showMessage(text) {
            msgBox.innerText = text;
            msgBox.style.opacity = "1";
            setTimeout(() => { msgBox.style.opacity = "0"; }, 3000);
        }

        function playRandomSong() {
            const randomIndex = Math.floor(Math.random() * songs.length);
            const selectedSong = songs[randomIndex];
            const fileName = selectedSong.split('/').pop().replace('.mp3', '').replaceAll('_', ' ');

            audio.src = selectedSong;
            audio.play()
                .then(() => {
                    isPlaying = true;
                    updateUI(true, fileName);
                })
                .catch(err => {
                    status.innerText = "Click Play to begin";
                });
        }

        function updateUI(playing, name) {
            if (playing) {
                btnIcon.innerText = "⏸";
                playBtn.classList.add('playing-animation');
                status.innerText = "Now Playing: " + name;
            } else {
                btnIcon.innerText = "▶";
                playBtn.classList.remove('playing-animation');
                status.innerText = isPlaying ? "Paused" : "";
            }
        }

        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
                updateUI(false);
            } else {
                playRandomSong();
            }
        });

        audio.onended = () => {
            isPlaying = false;
            updateUI(false);
            status.innerText = "Finished playing";
        };

        // Fullscreen Logic with Lock Code
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                // Enter fullscreen normally
                try {
                    const promise = document.documentElement.requestFullscreen();
                    if (promise !== undefined) {
                        promise.catch(err => {
                            showMessage("Fullscreen restricted by browser.");
                        });
                    }
                } catch (err) {
                    showMessage("Fullscreen not supported here.");
                }
            } else {
                // Try to exit - show lock modal
                lockModal.style.display = 'flex';
                passcodeInput.value = '';
                passcodeInput.focus();
            }
        });

        function handleUnlock() {
            if (passcodeInput.value === EXIT_CODE) {
                lockModal.style.display = 'none';
                document.exitFullscreen();
            } else {
                showMessage("Incorrect Passcode");
                passcodeInput.value = '';
                passcodeInput.classList.add('border-red-500');
                setTimeout(() => passcodeInput.classList.remove('border-red-500'), 500);
            }
        }

        confirmExit.addEventListener('click', handleUnlock);
        
        cancelExit.addEventListener('click', () => {
            lockModal.style.display = 'none';
        });

        passcodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleUnlock();
        });

        document.addEventListener('fullscreenchange', () => {
            if (document.fullscreenElement) {
                fsIconEnter.classList.add('hidden');
                fsIconExit.classList.remove('hidden');
            } else {
                fsIconEnter.classList.remove('hidden');
                fsIconExit.classList.add('hidden');
                lockModal.style.display = 'none'; // Ensure modal closes if escaped via Esc key
            }
        });
    </script>
</body>
</html>